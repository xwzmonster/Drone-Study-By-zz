# day01 - Gazebo:how to build own robot

## 关于SDF文件 --- World Demo
### 核心基础结构解析与规范

#### Define a world
1、每个SDF world文件都以如下标签开头：
```xml
<?xml version="1.0" ?>
<sdf version="1.8">
    <world name="world_demo">
        ...
        ...
    </world>
</sdf>
```
我们注意到：前两个标签定义了xml和sdf的版本
1、`<?xml version = "xml version"?>`：定义了xml的版本
2、`<sdf version = "sdf verison">`：定义了sdf的版本
3、`<world> ... </world>`中包含所有仿真元素(模型、物理规则光照)

#### Physics
```xml
<!--物理引擎装置-->
<physics name="1ms" type="ignored">
    <max_step_size>0.001</max_step_size>
    <real_time_factor>1.0</real_time_factor>
</physics>
```
这些物理标签：
    `<name="1ms>"`：物理配置标识，可自定义
    `<type="ignored>"`：动态引擎类型(物理库)，有Ode、Bullet、Simbody和Dart等。不选择则用`ignored`标记
    `<max_step_size>`：模拟仿真中的每个系统与世界状态交互的最长时间，值越小，仿真精度越高但计算量倍增
    `<real_time_factor>`：模拟时间与实际时间的比值，值 > 1即仿真时间流速快于实际时间，表示加快仿真速度。值 < 1即仿真时间流速慢于实际时间，表示降低仿真速度。

#### Plugins
##### 插件是指动态加载的代码块，比如
物理插件对于模拟世界动态变化十分重要
```xml
<!--物理插件-->
<plugin
    filename="libignition-gazebo-physics-system.so"
    name="ignition::gazebo::systems::UserCommands">
</plugin>
```

用户命令插件：主要用于创建模型、移动模型，删除模型和其他许多用户命令
```xml
<!--用户命令插件-->
<plugin
    filename="libignition-gazebo-user-commands-system.so"
    name="ignition::gazebo::systems::UserCommands">
</plugin>
```
filename：用于指定动态链接库文件(.so)路径，加载插件功能
name：定义插件的完整命名空间，需与代码中注册的插件名称一致

SceneBroadcaster插件：仿真中的场景状态广播中枢，负责将仿真世界的实时数据(模型位姿、传感器状态、环境参数等)同步到可视化工具和其他子系统。
```xml
<!--SceneBroadcaster插件-->
<plugin
    filename="libignition-gazebo-scene-broadcaster-system.so"
    name="ignition::gazebo::systems::SceneBroadcaster">
</plugin>
```

#### GUI
```xml
<!--GUI标签-->
<gui fullscreen="0">
    ...
    ...
</gui>
```
`<gui>`标签通过集成插件实现界面元素的定制化，例如3D场景渲染、仿真控制按钮、数据监控面板等。这些插件决定了用户在Gazebo中看到的界面和可操作的交互功能。
fullscreen：控制GUI是否全屏模式启动，"0"窗口化显示，"1"全屏

igntiontion-gui有很多插件可供选择。我们将添加那些让我们的世界启动并运行基本功能所必需的插件，比如：
##### Minimal Scene and GzSceneManager plugins
```xml
<!--3D scene-->
<plugin filename="MinimalScene" name="3D View">
  <gz-gui>
    <title>3D View</title>
    <property type="bool" key="showTitleBar">false</property>
    <property type="string" key="state">docked</property>
  </gz-gui>

  <engine>ogre2</engine>
  <scene>scene</scene>
  <ambient_light>0.4 0.4 0.4</ambient_light>
  <background_color>0.8 0.8 0.8</background_color>
  <camera_pose>-6 0 6 0 0.5 0</camera_pose>
  <camera_clip>
    <near>0.25</near>
    <far>25000</far>
  </camera_clip>
</plugin>
<plugin filename="GzSceneManager" name="Scene Manager">
  <gz-gui>
    <property key="resizable" type="bool">false</property>
    <property key="width" type="double">5</property>
    <property key="height" type="double">5</property>
    <property key="state" type="string">floating</property>
    <property key="showTitleBar" type="bool">false</property>
  </gz-gui>
</plugin>
```
MinimalScene：用于渲染3D场景，负责显示机器人、环境模型及物理交互效果。主要有以下子标签：
1、engine：指定渲染引擎（如ogre或ogre2），影响图形性能与效果